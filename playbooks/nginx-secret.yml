---
- name: Setup Web Server
  gather_facts: false
  hosts: all
  vars:
    # Password is: asdfasdf
    # Created by: ansible-vault encrypt_string 'super secret key'
    secret: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      62326566623662633331613935666264623132396532333466643331666133653638663664643766
      6137373465663830343434313733363033313736363531650a653031323866666534323834366638
      35613436366231366631393437616566353738316663653931356461393264626464323234316230
      6431323535386433610a393936336662303066373632323638393932623034336465623338613739
      33343064656137616330313937306265613134393633613631616463333837316231
  tasks:
    - name: Install Nginx
      apt:
        name: nginx
        update_cache: yes
        state: present
    - name: Copy index.html from template
      template:
        src: index-secret.html.j2
        dest: /var/www/html/index.html
        owner: root
        group: root
        mode: 0644
